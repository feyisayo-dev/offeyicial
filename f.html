<!DOCTYPE html>
<html>

<head>
  <title>Test ICE Candidates</title>
</head>

<body>
  <video id="localVideo" autoplay muted></video>
  <script>
    (async () => {
      // const configuration = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
      const localVideo = document.getElementById('localVideo');
      const mediaConstraints = { audio: true, video: true };

      try {
        const localStream = await navigator.mediaDevices.getUserMedia(mediaConstraints);
        localVideo.srcObject = localStream;

        const peerConnection = new RTCPeerConnection();
        console.log(peerConnection);
        peerConnection.addEventListener('icecandidate', (event) => {
          console.log('ICE Candidate gathering.');
          if (event.candidate) {
            const EC = event.candidate;
            console.log('ICE Candidate:', EC.candidate);
          } else {
            console.log('ICE Candidate gathering complete.');
          }
        });

        localStream.getTracks().forEach((track) => {
          peerConnection.addTrack(track, localStream);
        });
      } catch (error) {
        console.error('Error accessing media devices:', error);
      }
    })();

  </script>
</body>

</html>